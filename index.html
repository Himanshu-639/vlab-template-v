<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="description" content="brief description" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Add your V-Lab Title here</title>
    <link rel="icon" href="images/vlab-logo.png" type="image/x-icon" />
    <link rel="stylesheet" href="styles.css" />
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.7.0/styles/base16/harmonic16-dark.min.css"
    />
    <script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.8/clipboard.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.7.0/highlight.min.js"></script>
  </head>

  <body>
    <header class="header">
      <div class="logo-container">
        <div class="logo">
          <a
            href="https://www.vlab.andcollege.du.ac.in"
            rel="noopener"
            target="_blank"
          >
            <img class="logo-img" src="images/logo.png" alt="VLab" />
          </a>
        </div>
        <h1 class="vlab">V-Lab@ANDC</h1>
      </div>

      <div class="menu-toggle" onclick="toggleMenu()">â˜°</div>
      <nav class="nav-menu" id="small-screen">
        <div class="close-btn" onclick="toggleMenu()">âœ–</div>
        <a href="https://www.vlab.andcollege.du.ac.in">Home</a>
        <a href="https://www.vlab.andcollege.du.ac.in#labs_section">Labs</a>
        <a href="https://www.vlab.andcollege.du.ac.in#team">Team</a>
        <a href="https://www.andcollege.du.ac.in">College Website</a>
      </nav>
    </header>

    <div class="yourvlabtitle">
      <h1>your vlab title</h1>
    </div>

    <div class="pageview">
      <nav class="navigation">
        <button class="link" onclick="switchContent('aim')">
          <img class="icon" src="images/Aim_img.png" alt="Aim" />
          <span>Aim</span>
        </button>

        <button class="link" onclick="switchContent('theory')">
          <img class="icon" src="images/theory_img.png" alt="THEORY" />
          <span>Theory & Appli.</span>
        </button>

        <button class="link" onclick="switchContent('procedure')">
          <img class="icon" src="images/procedure_img.png" alt="PROCEDURE" />
          <span>Procedure</span>
        </button>

        <button class="link" onclick="switchContent('practice')">
          <img class="icon" src="images/practice_img.png" alt="PRACTICE" />
          <span>Practice</span>
        </button>

        <button class="link" onclick="switchContent('code')">
          <img class="icon" src="images/code_img.png" alt="CODES" />
          <span>Codes</span>
        </button>

        <button class="link" onclick="switchContent('result')">
          <img class="icon" src="images/result_img.png" alt="RESULT" />
          <span>Result</span>
        </button>

        <button class="link" onclick="switchContent('quiz')">
          <img class="icon" src="images/quiz_img.png" alt="QUIZ" />
          <span>Quiz</span>
        </button>

        <button class="link" onclick="switchContent('references')">
          <img class="icon" src="images/reference_img.png" alt="REFERENCE" />
          <span>References</span>
        </button>
        <button class="link" onclick="switchContent('tnt')">
          <img class="icon" src="images/tnt_img.png" alt="TEAM & TOOLS" />
          <span>Team & Tools</span>
        </button>
      </nav>

      <section class="main_practical">
        <!-- Aim -->
        <div class="container" id="aim">
          <div class="title">Aim</div>
          <div class="content">
            <p>The aim of your Virtual lab</p>
          </div>
        </div>

        <!-- Theory & Applications -->
        <div class="container" id="theory">
          <div class="title">Theory & Applications</div>
          <div class="content">
            <p>
              This section covers the fundamental theories and applications of
              the concept.
            </p>

            <span>Key Concepts</span>
            <ul>
              <li>Fundamentals of Data Structures</li>
              <li>
                Algorithms and Their Applications
                <ul>
                  <li>Sorting Algorithms</li>
                  <li>Searching Algorithms</li>
                </ul>
              </li>
              <li>Time Complexity Analysis</li>
            </ul>

            <span>Applications in Real World</span>
            <ol>
              <li>Application of Sorting Algorithms in Search Engines</li>
              <li>Machine Learning Algorithms in Predictive Analytics</li>
              <li>Data Structures in Web Development</li>
            </ol>

          </div>
        </div>

        <!-- Procedure -->
        <div class="container" id="procedure">
          <div class="title">Procedure</div>
          <div class="content">
            <p>
              This section provides the steps and procedure for implementing the
              concept discussed above.
            </p>

            <span>Steps for Sorting Algorithms</span>
            <ol>
              <li>Choose the appropriate sorting algorithm based on data</li>
              <li>Apply the sorting algorithm to the dataset</li>
              <li>Analyze the time complexity and performance</li>
            </ol>

            <span>Steps for Implementing Search Algorithms</span>
            <ul>
              <li>Identify the data structure to be used</li>
              <li>
                Choose the best search algorithm (e.g., Linear Search, Binary
                Search)
              </li>
              <li>Test the algorithm on various datasets</li>
            </ul>
          </div>
        </div>

        <!-- Code -->
        <div class="container" id="code">
          <div class="title">Code</div>
          <p>Example programs</p>
          <div class="switch-container">
            <input
              class="togswt"
              type="radio"
              id="cppRadio"
              name="codeSwitch"
              checked
            />
            <label for="cppRadio">C++</label>

            <input
              class="togswt"
              type="radio"
              id="pythonRadio"
              name="codeSwitch"
            />
            <label for="pythonRadio">Python</label>
          </div>

          <div class="code-blocks">
            <div id="cppCode" class="code-block active">
              <div class="code-content">
                <pre><code class="language-cpp">// C++ Code Example</code></pre>
                <button class="copy-button">Copy</button>
              </div>
            </div>
            <div id="pythonCode" class="code-block">
              <div class="code-content">
                <pre><code class="language-python"># Python Code Example</code></pre>
                <button class="copy-button">Copy</button>
              </div>
            </div>
          </div>
        </div>

        <!-- Practice -->
        <div class="container" id="practice">
          <div class="title">Practice</div>
          <div class="content">
<style>  
    .contain {
      display: flex;
      justify-content: center;
      flex-wrap: wrap;
      margin-bottom: 20px;
    }

    .box, .output-box {
      border: 2px dashed #8e8e8e;
      width: 320px;
      height: 220px;
      display: flex;
      align-items: center;
      justify-content: center;
      flex-direction: column;
      margin: 10px;
      padding: 10px;
      background: #ffffff;
      border-radius: 10px;
      box-shadow: 0 4px 8px rgba(0,0,0,0.1);
      transition: transform 0.2s;
      position: relative;
      cursor: pointer;
      box-sizing: border-box;
    }

    .output-box {
      overflow-y: auto;
      overflow-x: hidden;
      text-align: center;
      padding: 24px 14px 14px 14px;
      box-sizing: border-box;
      white-space: pre-wrap;
    }

    .box.dragover {
      background-color: #e0e7ff;
    }

    .box:hover, .output-box:hover {
      transform: scale(1.02);
    }

    .box img {
      max-width: 100%;
      max-height: 100%;
      object-fit: contain;
      border-radius: 5px;
    }

    .upload-content {
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
    }

    .upload-icon {
      font-size: 36px;
      color: #888;
    }

    .box input[type="file"] {
      margin-top: 10px;
    }

    button {
      margin: 10px auto;
      padding: 12px 24px;
      font-size: 16px;
      background-color: #007bff;
      color: white;
      border: none;
      border-radius: 6px;
      cursor: pointer;
      transition: background-color 0.3s;
      display: block;
    }

    button:hover {
      background-color: #0056b3;
    }

    .scorecard {
      margin-top: 30px;
      padding: 20px;
      background-color: #ffffff;
      border: 2px solid #28a745;
      border-radius: 10px;
      width: 300px;
      margin-left: auto;
      margin-right: auto;
      box-shadow: 0 4px 8px rgba(0,0,0,0.1);
      font-size: 19px;
      font-weight: bold;
      color: #28a745;
      text-align: center;
    }

    h3 {
      margin-bottom: 5px;
      color: #444;
    }
  </style>

  <div class="contain">
    <div class="box" id="box1">
      <div class="upload-content" id="upload-content1">
        <div class="upload-icon">ðŸ“¤</div>
        <h3 id="label1">Upload Image 1</h3>
        <input type="file" id="image1" accept="image/*" style="display: none;">
      </div>
      <img id="preview1" style="display:none;">
    </div>
    <div class="box" id="box2">
      <div class="upload-content" id="upload-content2">
        <div class="upload-icon">ðŸ“¤</div>
        <h3 id="label2">Upload Image 2</h3>
        <input type="file" id="image2" accept="image/*" style="display: none;">
      </div>
      <img id="preview2" style="display:none;">
    </div>
  </div>

  <button onclick="extractText()">Extract Text</button>

  <div class="contain">
    <div class="output-box" id="text1">Extracted Text 1</div>
    <div class="output-box" id="text2">Extracted Text 2</div>
  </div>

  <button onclick="preprocessText()">Preprocess Text</button>

  <div class="contain">
    <div class="output-box" id="pre1">Preprocessed Text 1</div>
    <div class="output-box" id="pre2">Preprocessed Text 2</div>
  </div>

  <button onclick="calculateSimilarity()">Calculate Similarity</button>

  <div class="scorecard" id="similarityResult">Similarity: Not Calculated</div>

  <script>
    const imageInputs = [document.getElementById('image1'), document.getElementById('image2')];
    const previews = [document.getElementById('preview1'), document.getElementById('preview2')];
    const uploadContents = [document.getElementById('upload-content1'), document.getElementById('upload-content2')];
    const texts = [document.getElementById('text1'), document.getElementById('text2')];
    const preprocessed = [document.getElementById('pre1'), document.getElementById('pre2')];
    const base64Images = [null, null];
    const extractedTexts = ["", ""];

    imageInputs.forEach((input, index) => {
      const box = document.getElementById('box' + (index + 1));

      const handleImage = file => {
        const reader = new FileReader();
        reader.onload = function (e) {
          previews[index].src = e.target.result;
          previews[index].style.display = 'block';
          uploadContents[index].style.display = 'none';
          base64Images[index] = e.target.result.replace(/^data:image\/(png|jpg|jpeg);base64,/, '');
        };
        reader.readAsDataURL(file);
      };

      input.addEventListener('change', function () {
        if (this.files[0]) {
          handleImage(this.files[0]);
        }
      });

      ['dragenter', 'dragover'].forEach(eventName => {
        box.addEventListener(eventName, e => {
          e.preventDefault();
          box.classList.add('dragover');
        });
      });

      ['dragleave', 'drop'].forEach(eventName => {
        box.addEventListener(eventName, e => {
          e.preventDefault();
          box.classList.remove('dragover');
        });
      });

      box.addEventListener('drop', e => {
        const file = e.dataTransfer.files[0];
        if (file && file.type.startsWith('image/')) {
          handleImage(file);
        }
      });

      box.addEventListener('click', () => {
        input.value = ''; // clear previous file to avoid double trigger
        input.click();
      });
    });

    async function extractText() {
      const apiKey = 'K88181478588957';
      for (let i = 0; i < 2; i++) {
        if (!base64Images[i]) {
          texts[i].innerText = 'No image selected';
          continue;
        }
        texts[i].innerText = 'Extracting...';
        const formData = new FormData();
        formData.append('base64Image', 'data:image/jpeg;base64,' + base64Images[i]);
        formData.append('language', 'eng');
        formData.append('apikey', apiKey);
        formData.append('OCREngine', 2);
        try {
          const response = await fetch('https://api.ocr.space/parse/image', {
            method: 'POST',
            body: formData
          });
          const result = await response.json();
          const parsedText = result.ParsedResults?.[0]?.ParsedText || "No text found.";
          extractedTexts[i] = parsedText;
          texts[i].innerText = parsedText;
        } catch (error) {
          texts[i].innerText = 'Error during OCR';
        }
      }
    }

    function preprocessText() {
      for (let i = 0; i < 2; i++) {
        let text = extractedTexts[i].toLowerCase();
        text = text.replace(/[â†’V]/g, '').trim();
        const tokens = text.split(/\s+/);
        const stopwords = new Set(["i", "me", "my", "myself", "we", "our", "ours", "ourselves", "you", "your", "yours", "yourself", "yourselves",
"he", "him", "his", "himself", "she", "her", "hers", "herself", "it", "its", "itself", "they", "them", "their",
"theirs", "themselves", "what", "which", "who", "whom", "this", "that", "these", "those", "am", "is", "are", "was",
"were", "be", "been", "being", "have", "has", "had", "having", "do", "does", "did", "doing", "a", "an", "the", "and",
"but", "if", "or", "because", "as", "until", "while", "of", "at", "by", "for", "with", "about", "against", "between",
"into", "through", "during", "before", "after", "above", "below", "to", "from", "up", "down", "in", "out", "on", "off",
"over", "under", "again", "further", "then", "once", "here", "there", "when", "where", "why", "how", "all", "any",
"both", "each", "few", "more", "most", "other", "some", "such", "no", "nor", "not", "only", "own", "same", "so",
"than", "too", "very", "s", "t", "can", "will", "just", "don", "should", "now"]);
        const punctuations = new Set(["!", "\"", "#", "$", "%", "&", "'", "(", ")", "*", "+", ",", "-", ".", "/", ":", ";", "<", "=", ">", "?", "@", "[", "\\", "]", "^", "_", "`", "{", "|", "}", "~"]);
        const filtered = tokens.filter(token => !stopwords.has(token) && !punctuations.has(token));
        preprocessed[i].innerText = filtered.join(' ');
      }
    }

function calculateSimilarity() {
  const docs = [preprocessed[0].innerText, preprocessed[1].innerText];
  const tokenizedDocs = docs.map(doc => doc.split(/\s+/));
  const allWords = Array.from(new Set(tokenizedDocs.flat()));

  const tfidfVectors = tokenizedDocs.map(words => {
    return allWords.map(word => {
      const tf = words.filter(w => w === word).length / words.length;

      // Compute correct DF (word occurrence per document)
      const df = tokenizedDocs.reduce((acc, docWords) => acc + (docWords.includes(word) ? 1 : 0), 0);

      // Smoothed IDF as used by scikit-learn
      const idf = Math.log((1 + tokenizedDocs.length) / (1 + df)) + 1;

      return tf * idf;
    });
  });

  const dotProduct = tfidfVectors[0].reduce((sum, val, i) => sum + val * tfidfVectors[1][i], 0);
  const magnitudeA = Math.sqrt(tfidfVectors[0].reduce((sum, val) => sum + val * val, 0));
  const magnitudeB = Math.sqrt(tfidfVectors[1].reduce((sum, val) => sum + val * val, 0));
  let similarity = dotProduct / (magnitudeA * magnitudeB);

  if (isNaN(similarity)) similarity = 0;

  document.getElementById('similarityResult').innerText = `Similarity: ${Math.round(similarity * 100)}%`;
}


  </script>


        <!-- Results -->
        <div class="container" id="result">
          <div class="title">Result</div>
          <div class="content">
            <p>Result of your vlab</p>
          </div>
        </div>

        <!-- Quiz -->
        <div class="container" id="quiz">
          <div class="title">Quiz</div>
          <p id="question"></p>
          <div id="choices" class="choices"></div>
          <button id="save-btn" class="save-button">Save</button>
          <button id="next-btn" class="next-button" style="display: none">
            Next
          </button>
          <button id="retake-btn" style="display: none">Retake Quiz</button>
          <div id="quiz-report" style="display: none"></div>
          <!-- Section to display quiz report -->
        </div>

        <!-- References -->
        <div class="container" id="references">
          <div class="title">References</div>
          <div class="content">
            <ul class="ref-list">
              <li>
                <span> refernce 1 </span>
              </li>
              <li>
                <span> refernce 2 </span>
              </li>
            </ul>
          </div>
        </div>

        <!-- Team & Tools -->
        <div class="container" id="tnt">
          <div class="title">Team & Tools</div>
          <div class="content">
            <h3>Students</h3>
            <ul class="ref-list">
              <li>
                <a href="profile url if you have" rel="noopener" target="_blank"
                  ><span>Name and Course of each team member</span></a
                >
              </li>
            </ul>
            <h3>Mentors</h3>
            <ul class="ref-list">
              <li><span> Mentor Name</span></li>
            </ul>
            <h3>Tools Used</h3>
            <ul class="tools-list">
              <li>
                <span> Add tools used here </span>
              </li>
              <li>
                <span>Vanilla HTML, CSS, JS - for creating the web page</span>
              </li>
            </ul>
          </div>
        </div>
      </section>
    </div>
    <script>
      hljs.highlightAll();
      function toggleMenu() {
        const menu = document.querySelector(".nav-menu");
        menu.classList.toggle("show");
      }
    </script>
    <script src="script.js"></script>
  </body>
</html>
